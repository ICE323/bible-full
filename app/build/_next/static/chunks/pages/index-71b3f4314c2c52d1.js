(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7912:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(7294),s=n(29),a=n(6687),i=n(7794),c=n.n(i),l=n(3750),o=n(5299),u=n(5893),d=function(){return(0,u.jsxs)("div",{className:"lds-ellipsis",children:[(0,u.jsx)("div",{}),(0,u.jsx)("div",{}),(0,u.jsx)("div",{}),(0,u.jsx)("div",{})]})},x=n(1819),f=n(1120),p=n.n(f),h=n(3920),m={src:"/_next/static/media/bot.8f6b4e3a.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABE0lEQVR4nAEIAff+AayAPwDq8P8kzQhAmkg1LTsZ0/UADQvQxS5HkGgALbvaAbCKeiP34PHGi5aVFo23vQAmB/0A/r5GABI+i+r5RG03AbN4b7cE/wBICjxI+hglJAYdEQEA+ufa+vYP6QYFA/K1AY05cfMCPg0MJ0M8ADgqHwD68AAA7urLALkM+ADT/PjyAVx3mvP3GA0MrffMAKZGVwBN8ukA7sN+AOdOYADeGzDyAVt/vbn+Fu5G1wTR+o05TgZC9O4A/se9+vosAgbwE+W3AXAXuiT1kvTHm8PkFLdZOf9EAesA7bu9ARYpGerxKxw5AUxmpAA8PfYmnrUFm3pCIztU9s4A6OPswyNCSWUADffca4l3l8flMdsAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},A=n(6154),g=(0,h.ZP)("http://localhost:5000"),v=function(){var e,t,n,i=(0,r.useState)(!1),f=i[0],h=i[1],v=(0,r.useState)(""),b=v[0],w=v[1],j=(0,r.useState)([]),N=j[0],y=j[1];(0,r.useEffect)(function(){var e=document.getElementById("chatView");e.scrollTop=e.scrollHeight},[N,y]),(0,r.useEffect)(function(){P()},[]);var E=function(){h(!0);var e=[].concat((0,a.Z)(N),[{role:"user",content:""===b?"Hi":b}]);A.Z.post("http://localhost:5000/api/gpt",{history:e}).then(function(e){y([].concat((0,a.Z)(N),[{role:"assistant",content:e.data}])),h(!1)}).catch(function(e){return console.log(e)})};g.on("GPTResponse",function(e){var t;(null===(t=N[N.length-1])||void 0===t?void 0:t.role)==="user"?(h(!1),y([].concat((0,a.Z)(N),[{role:"assistant",content:e}]))):y(N.map(function(t,n){return n===N.length-1?{role:"assistant",content:t.content+e}:t}))});var P=function(){E()},k=(e=(0,s.Z)(c().mark(function e(){return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),D=(t=(0,s.Z)(c().mark(function e(){var t,n,r,a,i,l,o,u,d,f;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(null==(t=document.querySelector("#print-content"))?void 0:t.getElementsByTagName("img")).map(function(){var e=(0,s.Z)(c().mark(function e(t){var n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.classList.contains("cursor-pointer")){e.next=6;break}return e.next=3,F(t.src);case 3:return n="data:image/png;base64,"+(n=e.sent),e.abrupt("return",new Promise(function(e,r){t.onload=function(){return e()},t.onerror=r,t.src=n}));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(n);case 5:r=t.scrollHeight,a=20,l=(i=new x.ZP("portrait","pt",[595,r])).internal.pageSize.getWidth(),o=i.internal.pageSize.getHeight(),i.setLineWidth(1),u=0;case 12:if(!(u<r)){e.next=25;break}return e.next=15,p()(t,{windowWidth:t.scrollWidth,windowHeight:o,scrollY:-u});case 15:return d=e.sent,e.next=18,d.toDataURL("image/png");case 18:return f=e.sent,e.next=21,i.addImage(f,"PNG",20,0,l-2*a,0,null,"FAST");case 21:(u+=o)<r&&i.addPage(),e.next=12;break;case 25:i.save("history.pdf");case 26:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),F=(n=(0,s.Z)(c().mark(function e(t){var n,r;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.blob();case 6:return r=e.sent,e.abrupt("return",new Promise(function(e,t){var n=new FileReader;n.onloadend=function(){e(n.result.split(",")[1])},n.onerror=t,n.readAsDataURL(r)}));case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error converting image to base64:",e.t0),e.abrupt("return",null);case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(e){return n.apply(this,arguments)}),Z=function(){""!==b&&(y(function(e){return[].concat((0,a.Z)(e),[{role:"user",content:b}])}),w(""),P())};return(0,u.jsxs)("div",{className:"relative w-full min-h-screen flex flex-col ",children:[(0,u.jsxs)("div",{className:"flex items-center bg-[#1167b1] justify-between h-[100px] px-[20px]",children:[(0,u.jsxs)("div",{className:"flex items-center text-white",children:[(0,u.jsx)("img",{src:m.src,alt:"assistant",width:40,height:40,style:{marginRight:"10px"}}),"AI Bible Games"]}),(0,u.jsx)("div",{className:"text-white text-xl",children:"New Testament : The AI Experience"}),(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("button",{id:"print-btn",className:"text-[#fff] text-sm border py-[5px] px-[10px] rounded-lg hover:bg-[#fff] hover:text-[#1167b1]",onClick:k,children:"Prepare PDF"}),(0,u.jsx)(l.FQA,{color:"#fff",size:20,style:{cursor:"pointer"}})]})]}),(0,u.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,u.jsx)("div",{className:"h-[calc(100vh-170px)] overflow-y-scroll flex justify-center max-[520px]:h-[calc(100vh-250px)]",id:"chatView",children:(0,u.jsxs)("div",{className:"w-[800px] py-4 transition-all duration-300 ease-in-out",id:"print-content",children:[N&&N.map(function(e,t){if(e.content)return(0,u.jsx)("div",{className:"mb-[16px]",children:(0,u.jsxs)("div",{className:"flex items-start leading-6 ".concat("user"===e.role&&"justify-end"," gap-3"),children:["assistant"===e.role&&(0,u.jsx)("img",{src:m.src,alt:"",draggable:!1,width:45,height:45,className:"cursor-pointer"}),(0,u.jsx)("div",{className:"flex items-center gap-3",children:(0,u.jsx)("div",{className:"".concat("user"===e.role?"bg-[#1167b1]":"bg-[#F4F6F8]"," rounded-lg px-[12px] pt-[12px]"),children:(0,u.jsx)("span",{className:"font-inter text-[14px] ".concat("user"===e.role?"text-[#F4F6F8]":"text-[#1167b1]"," markdown"),children:(0,u.jsx)(o.D,{children:e.content})})})})]})},t)}),f&&(0,u.jsx)("div",{className:"mb-[16px]",children:(0,u.jsxs)("div",{className:"flex items-center gap-3",children:[(0,u.jsx)("img",{src:m.src,alt:"",draggable:!1,width:45,height:45,className:"cursor-pointer"}),(0,u.jsx)("div",{className:"flex items-center gap-3",children:(0,u.jsx)(d,{})})]})})]})}),(0,u.jsxs)("div",{className:"mt-[10px] h-[60px] bg-[#1167b1] flex py-[8px] px-[5px]",children:[(0,u.jsx)("div",{className:"flex items-center relative w-full",children:(0,u.jsx)("input",{type:"text",className:"\r flex \r items-center \r h-full \r p-[12px] \r w-full \r rounded-lg \r border \r border-[#919eab3d] \r text-[#919EAB] \r text-[14px] \r leading-[22px] \r font-normal \r font-inter\r ",placeholder:"Enter your message...",value:b,readOnly:!!f,style:{outline:"none"},onChange:function(e){return w(e.target.value)},onKeyDown:function(e){13===e.keyCode&&Z()}})}),(0,u.jsx)("div",{onClick:Z,className:"text-[#1167b1] px-[8px] ml-2 cursor-pointer h-full bg-[#ececec] rounded-md flex justify-center items-center font-bold",children:"Send"})]})]})]})},b=function(){return(0,u.jsx)(v,{})}},8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7912)}])}},function(e){e.O(0,[13,847,443,728,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);